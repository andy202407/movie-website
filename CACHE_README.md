# 星海影院缓存系统说明

## 概述
这是一个24小时自动过期的页面缓存系统，无需定时任务，系统会自动管理缓存的生命周期。

## 工作原理

### 自动过期机制
- 每次访问页面时，系统会检查缓存文件的时间戳
- 如果缓存超过24小时，系统会自动删除过期缓存
- 然后重新生成新的缓存文件
- 无需手动清理，完全自动化

### 缓存策略
- **缓存页面**：首页、分类页、视频详情页、播放页、搜索页
- **不缓存**：用户登录后的页面、API请求、POST请求
- **过期时间**：24小时（86400秒）

## 文件说明

### 核心文件
- `CacheManager.php` - 缓存管理核心类
- `cache_manager.php` - 缓存状态查看页面

### 缓存目录
- `cache/pages/` - 页面缓存文件存储目录
- 系统会自动创建必要的目录结构

## 使用方法

### 1. 查看缓存状态
访问 `/cache_manager.php` 查看当前缓存状态（需要登录）

### 2. 缓存自动管理
- 系统会自动创建缓存
- 系统会自动删除过期缓存
- 无需任何手动操作

## 性能提升

### 缓存前
- 每次访问都要执行PHP代码
- 每次都要查询数据库
- 每次都要渲染模板

### 缓存后
- 直接返回静态HTML文件
- 跳过PHP执行和数据库查询
- 大幅提升页面加载速度

## 注意事项

1. **缓存目录权限**：确保 `cache/` 目录有写入权限
2. **磁盘空间**：缓存文件会占用磁盘空间，但会自动清理
3. **内容更新**：内容更新后，缓存会在24小时内自动更新
4. **用户个性化**：登录用户的页面不会被缓存，保证个性化内容

## 技术特点

- **零配置**：安装后即可使用，无需额外配置
- **自动管理**：完全自动化，无需维护
- **智能判断**：自动识别哪些页面应该缓存
- **性能优化**：显著提升网站访问速度

## 预期效果

- **页面加载速度**：提升3-5倍
- **服务器压力**：减少70-80%
- **用户体验**：大幅改善
- **SEO友好**：更快的页面响应时间
